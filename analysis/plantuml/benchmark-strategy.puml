@startuml
!theme plain
title Comprehensive Benchmarking Strategy

package "Test Pattern Categories" {
  rectangle "Literal Patterns" as literals #e8f5e8 {
    rectangle "'error', 'warning', 'fatal'" as lit1
    rectangle "1-1000 pattern variations" as lit2
    literals --> lit1
    literals --> lit2
  }
  
  rectangle "Simple Regex" as simple #fff3e0 {
    rectangle "'[a-z]+', '\d{3,6}', 'a.*b'" as sim1  
    rectangle "Character classes + quantifiers" as sim2
    simple --> sim1
    simple --> sim2
  }
  
  rectangle "Complex Regex" as complex #ffebee {
    rectangle "'^(https?://[^/]+).*'" as comp1
    rectangle "Alternation + grouping" as comp2
    complex --> comp1
    complex --> comp2
  }
  
  rectangle "Real-World Patterns" as realworld #f3e5f5 {
    rectangle "Log processing (Apache, Nginx)" as logs
    rectangle "Genomic sequences (ACGT)" as genome
    rectangle "Network protocols (IP, URL)" as network
    realworld --> logs
    realworld --> genome
    realworld --> network
  }
}

literals --> simple
simple --> complex
complex --> realworld

package "Test Configuration Matrix" {
  rectangle "Data Sets" as datasets #e1f5fe {
    rectangle "Small: 1KB - 1MB" as small
    rectangle "Medium: 1MB - 100MB" as medium
    rectangle "Large: 100MB - 1GB" as large
    rectangle "Streaming: Continuous" as streaming
    datasets --> small
    datasets --> medium
    datasets --> large
    datasets --> streaming
  }
  
  rectangle "Performance Metrics" as metrics #c8e6c9 {
    rectangle "Throughput (MB/s)" as throughput
    rectangle "Latency Percentiles (p50, p95, p99)" as latency
    rectangle "Memory Allocation Rate" as memory
    rectangle "CPU Utilization & Cache Hits" as cpu
    rectangle "Scalability with Pattern Count" as scalability
    metrics --> throughput
    metrics --> latency
    metrics --> memory
    metrics --> cpu
    metrics --> scalability
  }
  
  rectangle "Comparison Baselines" as baselines #fce4ec {
    rectangle "Java java.util.regex" as java
    rectangle "Google RE2 (JNI)" as re2
    rectangle "PCRE (JNI)" as pcre
    rectangle "Intel Hyperscan" as hyperscan
    rectangle "Current rmatch" as current
    baselines --> java
    baselines --> re2
    baselines --> pcre
    baselines --> hyperscan
    baselines --> current
  }
}

datasets --> metrics
metrics --> baselines

package "Test Execution Framework" {
  rectangle "JMH Micro-benchmarks" as jmh #f9fbe7 {
    rectangle "Warmup: 10 iterations" as warmup
    rectangle "Measurement: 20 iterations" as measure  
    rectangle "Multiple JVM forks" as forks
    jmh --> warmup
    jmh --> measure
    jmh --> forks
  }
  
  rectangle "Macro-benchmarks" as macro #f9fbe7 {
    rectangle "End-to-end scenarios" as e2e
    rectangle "Multi-threaded workloads" as multithread
    rectangle "Long-running stability" as stability
    macro --> e2e
    macro --> multithread
    macro --> stability
  }
  
  rectangle "Regression Testing" as regression #f9fbe7 {
    rectangle "Automated CI integration" as ci
    rectangle "Performance alerts" as alerts
    rectangle "Historical tracking" as history
    regression --> ci
    regression --> alerts
    regression --> history
  }
}

jmh --> macro
macro --> regression

realworld --> datasets
baselines --> jmh

@enduml